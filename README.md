# Employee Management System
### 1.Установка и запуск

В терминале клонирйте репозиторий и перейдите в папку с приложением (Ваш компьютер должен быть связан с аккауном Git):

```
(для Windows)
git clone https://github.com/IrinaDemyanenko/employee_management_system.git
cd employee_management_system
```
Установите зависимости, активируйте виртуальное окружение
```
poetry install
poetry shell
```
Перейдите в папку с проектом
```
cd backend
```
Запустите сервер разработчика
```
python manage.py runserver
```

### 2.Создание пользователей с разными ролями

В проекте используется стандартная модель пользователя 'AUTH_USER_MODEL'.

- **Обычный пользователь** 'is_staff=False' — может только просматривать сотрудников (GET-запросы) и пользоваться другими безопасными методами HEAD, OPTIONS
- **Администратор** 'is_staff=True' — может добавлять, редактировать и удалять сотрудников.

Пользователь и Работник - разные таблицы.
Чтобы создать пользоваетля с разными ролями, нужно перейти в админ-панель:

```
http://127.0.0.1:8000/admin/auth/user/
```
Создать пользователя через интерфейс и в процессе создания есть возможность поставить галочку 'Staff status'. Роль можно будет позже редактировать.

Второй вариант создания - через терминал:
```
python manage.py shell
```
```
from django.contrib.auth import get_user_model
User = get_user_model()

User.objects.create_user('hr', 'hr@example.com', '1234', is_staff=True)

User.objects.create_superuser('admin', 'admin@example.com', 'admin123')
```


### 3.Запуск тестов

Находясь в директории employee_management_system\backend нужно запустить команду из терминала
```
python manage.py test employees.tests
```
Django автоматически создаст тестовую базу данных
и выполнит все тесты (API, импорт, разрешения, модель и другое).

### 4.Тестирование импорта данных

С запуском тестов (пункт 3) запустится и тестирование импорта данных, но при желание этот тест можно запустить отдельно. Для этого из директории employee_management_system\backend
запустите команду в терминале
```
python manage.py test employees.tests.test_api_import
```

Этот тест проверяет:

- корректную загрузку Excel-файла;

- валидацию обязательных полей;

- проверку email и дублей;

- отчёт, включающий количество созданных записей и список ошибок.

Пример отчёта в json:
{
  "created": 2,
  "errors_count": 1,
  "errors": [
    "Строка 4 — отсутствуют обязательные поля",
    "Строка 5 — некорректный email (ivan@@example.com)"
  ]
}
